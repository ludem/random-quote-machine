<html>
    <head>
        <style>
            html{
                font-family: 'Bitter', serif;
                font-size: calc(10px + 2vmin);
                color:black;
            }
            body{
                background-size: cover;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                text-align: center;
                min-height: 90vh;
                max-width:100vw;
            }
            .container{
                            box-shadow: 0 4px 8px 0 rgba(0,0,0,0.2);
                            border-radius: 0.25em;
                            display:flex;
                            flex-direction: column;
                            align-items:center;
                            justify-content: center;
                            text-align: center;
                            position: relative;
                            padding:0.5rem 1rem;
                            font-weight: 800;
                            height: 30vh;
                            width: 60vw;
            
              background: -webkit-linear-gradient(340deg, #fc3b30 40%, #5ac8fa 40%);
              background: -moz-linear-gradient(340deg, #fc3b30 40%, #5ac8fa 40%);
              background: -o-linear-gradient(340deg, #fc3b30 40%, #5ac8fa 40%);
              background: linear-gradient(70deg, #fc3b30 40%, #5ac8fa 40%);
            
            
              transition: box-shadow 0.5s linear;
                        }
            .change{
                position: absolute;
                bottom: 0.2rem;
                right: 0.2rem;
                margin:0.5rem;
                cursor: pointer;
            }
            h2::before { 
                content: "« ";
            }
            h2::after { 
                content: " »";
            }
            .author{
                font-size: 0.7rem;
            }
            h1{
                font-size: 1rem;
            }
            .title{
                display: flex;
                justify-content: center;
                width:90vw;
            }
            .twitter-share-button{
                position: absolute;
                bottom: 0.2rem;
                left: 0.2rem;
                margin:0.5rem;
                cursor: pointer;   
            }
            .box-refresh{
                box-shadow: 0 8px 16px 0 rgba(255, 215, 0, 0.9);
                }
            .faster-spin {
                -webkit-animation: fa-spin 0.5s infinite linear;
                animation: fa-spin 0.5s infinite linear;
                color:gold;
}
        </style>
        <link href='http://fonts.googleapis.com/css?family=Bitter' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    </head>
    <body>
        <div class=title>
            <h1>My Random Quote Machine</h1>
        </div>
        <div class=container>
            <h2 class="quote">brum</h2>
            <p class="author">Don Semola Gatto</p>
            <a class="twitter-share-button"
                href="https://twitter.com/intent/tweet">
                <i class="fa fa-twitter fa-2x"></i>
            </a>
            <i class="change fa fa-refresh fa-2x fa-fw"></i>
        </div>
    </body>
</html>
<script>
const endpoint = 'https://jsonblob.com/api/jsonBlob/729a10dd-4837-11e7-ae4c-05b82d5e827c';
const quotes = [{text: 'Provola', author: 'X'}];

const floorRandomNumberInARange = function (max, min = 0) {
    return Math.floor(Math.random() * (max-min) + min);
}
const filterArray = array => array.filter(el => el['author'] && el['text']);
const randomElementFromArray = arr => arr[floorRandomNumberInARange(arr.length)];

fetch(endpoint)
    .then(blob => blob.json())
    .then(json => filterArray(json))
    .then(data => quotes.push(...data))
    .catch(e => console.log(e))

const quoteBox = document.querySelector('.quote');
const authorBox = document.querySelector('.author');
const quoteButton = document.querySelector('.change');
const container = document.querySelector('.container');
quoteButton.addEventListener('click', function(e) {
    const randomQuote = randomElementFromArray(quotes);
    console.log(randomQuote);
    quoteBox.innerHTML = randomQuote.text;
    authorBox.innerHTML = randomQuote.author;
    container.classList.add('box-refresh');
    quoteButton.classList.add('faster-spin');
});

container.addEventListener('transitionend', function(e){
    quoteButton.classList.remove('faster-spin');
    container.classList.remove('box-refresh');
})

</script>